<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ proj.title }} â€” VibeCoder ì‡¼ì¼€ì´ìŠ¤</title>
  <meta name="description" content="{{ proj.description or proj.title }}"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    :root{--bg:#050508;--surface:#0d0d14;--surface2:#13131e;--border:rgba(255,255,255,.07);
      --accent:#7c3aed;--accent2:#06b6d4;--text:#f1f5f9;--muted:#64748b;--radius:14px;}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
    .bg-orbs{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;}
    .orb{position:absolute;border-radius:50%;filter:blur(130px);opacity:.07;animation:orbFloat 20s ease-in-out infinite;}
    .orb:nth-child(1){width:500px;height:500px;background:radial-gradient(circle,#7c3aed,transparent);top:-100px;left:-50px;}
    @keyframes orbFloat{0%,100%{transform:translate(0,0);}50%{transform:translate(30px,-40px);}}
    .content{position:relative;z-index:1;}

    header{position:sticky;top:0;z-index:100;background:rgba(5,5,8,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);}
    nav{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:8px;height:64px;padding:0 24px;}
    .logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,#7c3aed,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none;margin-right:auto;}
    nav a{color:var(--muted);text-decoration:none;font-size:.9rem;padding:8px 14px;border-radius:8px;transition:all .2s;}
    nav a:hover{color:var(--text);background:rgba(255,255,255,.05);}
    .nav-cta{background:linear-gradient(135deg,#7c3aed,#5b21b6)!important;color:#fff!important;padding:8px 18px!important;}

    main{max-width:900px;margin:0 auto;padding:60px 24px;}
    .back-link{display:inline-flex;align-items:center;gap:6px;color:var(--muted);text-decoration:none;font-size:.88rem;margin-bottom:32px;transition:color .2s;}
    .back-link:hover{color:var(--text);}

    .project-hero{background:linear-gradient(145deg,var(--surface),var(--surface2));
      border:1px solid var(--border);border-radius:20px;overflow:hidden;margin-bottom:28px;}
    .project-thumb{width:100%;height:320px;background:linear-gradient(135deg,#1e1b2e,#0f172a);
      display:flex;align-items:center;justify-content:center;font-size:5rem;overflow:hidden;}
    .project-thumb img{width:100%;height:100%;object-fit:cover;}
    .project-body{padding:36px;}
    .project-meta{display:flex;align-items:center;gap:12px;margin-bottom:20px;flex-wrap:wrap;}
    .author-badge{background:rgba(124,58,237,.12);color:#a78bfa;border:1px solid rgba(124,58,237,.2);
      padding:4px 14px;border-radius:100px;font-size:.82rem;font-weight:600;}
    .project-time{font-size:.82rem;color:var(--muted);}
    .stats{margin-left:auto;display:flex;gap:14px;font-size:.82rem;color:var(--muted);}

    h1.project-title{font-size:2rem;font-weight:800;line-height:1.2;margin-bottom:20px;letter-spacing:-.03em;}
    .project-desc{font-size:1rem;line-height:1.8;color:#cbd5e1;white-space:pre-wrap;}

    .tech-list{display:flex;flex-wrap:wrap;gap:8px;margin-top:24px;}
    .tech-badge{background:rgba(124,58,237,.12);color:#a78bfa;border:1px solid rgba(124,58,237,.2);
      font-size:.8rem;padding:5px 14px;border-radius:100px;font-weight:500;}

    .project-links{display:flex;gap:12px;margin-top:28px;flex-wrap:wrap;}
    .link-btn{display:inline-flex;align-items:center;gap:8px;padding:11px 22px;border-radius:10px;
      font-size:.9rem;font-weight:600;text-decoration:none;transition:all .2s;}
    .link-demo{background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;box-shadow:0 2px 12px rgba(124,58,237,.3);}
    .link-demo:hover{box-shadow:0 4px 20px rgba(124,58,237,.5);transform:translateY(-1px);}
    .link-github{background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--text);}
    .link-github:hover{background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.15);}

    .project-actions{display:flex;align-items:center;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid var(--border);}
    .like-btn{display:flex;align-items:center;gap:8px;padding:10px 20px;border-radius:10px;
      border:1px solid var(--border);background:transparent;color:var(--muted);
      font-size:.9rem;cursor:pointer;transition:all .2s;font-family:'Inter',sans-serif;}
    .like-btn:hover,.like-btn.liked{border-color:rgba(239,68,68,.35);color:#f87171;background:rgba(239,68,68,.06);}
    .share-btn{padding:10px 20px;border-radius:10px;border:1px solid var(--border);
      background:transparent;color:var(--muted);font-size:.9rem;cursor:pointer;transition:all .2s;font-family:'Inter',sans-serif;}
    .share-btn:hover{border-color:rgba(6,182,212,.3);color:#22d3ee;}

    /* ëŒ“ê¸€ */
    .comments-section{margin-top:8px;}
    .comments-title{font-size:1.1rem;font-weight:700;margin-bottom:20px;}
    .comment-item{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:10px;position:relative;}
    .comment-meta{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
    .comment-author{font-size:.85rem;font-weight:600;}
    .comment-time{font-size:.78rem;color:var(--muted);}
    .comment-body{font-size:.9rem;line-height:1.7;color:#cbd5e1;white-space:pre-wrap;}
    .comment-del-btn{position:absolute;top:12px;right:12px;padding:4px 10px;border-radius:6px;
      border:1px solid transparent;background:transparent;color:var(--muted);font-size:.75rem;cursor:pointer;transition:all .2s;font-family:'Inter',sans-serif;}
    .comment-del-btn:hover{border-color:rgba(248,113,113,.2);color:#f87171;}

    .comment-form{background:linear-gradient(145deg,var(--surface),var(--surface2));
      border:1px solid var(--border);border-radius:16px;padding:28px;margin-top:24px;}
    .comment-form h3{font-size:1rem;font-weight:700;margin-bottom:20px;}
    .form-row2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;}
    .cf-input{width:100%;background:#050508;border:1px solid rgba(255,255,255,.08);
      color:var(--text);padding:10px 14px;border-radius:9px;font-size:.88rem;font-family:'Inter',sans-serif;outline:none;transition:border .2s;}
    .cf-input:focus{border-color:rgba(124,58,237,.35);}
    .cf-textarea{width:100%;background:#050508;border:1px solid rgba(255,255,255,.08);
      color:var(--text);padding:12px 14px;border-radius:9px;font-size:.88rem;
      font-family:'Inter',sans-serif;outline:none;resize:vertical;min-height:100px;line-height:1.6;transition:border .2s;}
    .cf-textarea:focus{border-color:rgba(124,58,237,.35);}
    ::placeholder{color:var(--muted);}
    .cf-submit{background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;border:none;
      padding:11px 28px;border-radius:9px;font-size:.9rem;font-weight:700;cursor:pointer;
      font-family:'Inter',sans-serif;margin-top:12px;transition:all .2s;box-shadow:0 2px 12px rgba(124,58,237,.25);}
    .cf-submit:hover{box-shadow:0 4px 20px rgba(124,58,237,.4);transform:translateY(-1px);}
    .empty-comments{text-align:center;padding:32px;color:var(--muted);font-size:.9rem;}

    footer{border-top:1px solid var(--border);padding:32px 24px;text-align:center;color:var(--muted);font-size:.85rem;margin-top:40px;}
    @media(max-width:640px){nav a:not(.nav-cta):not(.logo){display:none;}.project-body{padding:20px;}.form-row2{grid-template-columns:1fr;}}
  </style>
</head>
<body>
<div class="bg-orbs"><div class="orb"></div></div>
<div class="content">

<header>
  <nav>
    <a href="/" class="logo">âš¡ VibeCoder</a>
    <a href="/showcase">ì‡¼ì¼€ì´ìŠ¤</a>
    <a href="/lounge">ë¼ìš´ì§€</a>
    <a href="/submit" class="nav-cta">í”„ë¡œì íŠ¸ ì˜¬ë¦¬ê¸°</a>
  </nav>
</header>

<main>
  <a href="/showcase" class="back-link">â† ì‡¼ì¼€ì´ìŠ¤ë¡œ ëŒì•„ê°€ê¸°</a>

  <div class="project-hero">
    <div class="project-thumb">
      {% if proj.thumbnail %}
      <img src="{{ proj.thumbnail }}" alt="{{ proj.title }}"/>
      {% else %}âš¡{% endif %}
    </div>
    <div class="project-body">
      <div class="project-meta">
        <span class="author-badge">{{ proj.author or 'ìµëª…ì½”ë”' }}</span>
        <span class="project-time">{{ proj.created_at | fmt_date }}</span>
        <div class="stats">
          <span>ğŸ‘ {{ proj.view_count }}</span>
          <span>â¤ï¸ <span id="like-count">{{ proj.likes }}</span></span>
        </div>
      </div>

      <h1 class="project-title">{{ proj.title }}</h1>
      <div class="project-desc">{{ proj.description or '' }}</div>

      {% if proj.tech_stack %}
      <div class="tech-list">
        {% if proj.tech_stack is string %}
          {% for t in proj.tech_stack[1:-1].split(',') %}<span class="tech-badge">{{ t.strip().strip('"') }}</span>{% endfor %}
        {% else %}
          {% for t in proj.tech_stack %}<span class="tech-badge">{{ t }}</span>{% endfor %}
        {% endif %}
      </div>
      {% endif %}

      {% if proj.demo_url or proj.github_url %}
      <div class="project-links">
        {% if proj.demo_url %}
        <a href="{{ proj.demo_url }}" target="_blank" rel="noopener" class="link-btn link-demo">ğŸš€ ë°ëª¨ ë³´ê¸°</a>
        {% endif %}
        {% if proj.github_url %}
        <a href="{{ proj.github_url }}" target="_blank" rel="noopener" class="link-btn link-github">ğŸ’» GitHub</a>
        {% endif %}
      </div>
      {% endif %}

      <div class="project-actions">
        <button class="like-btn" id="like-btn" onclick="likeProject()">
          â¤ï¸ ì¢‹ì•„ìš” <span id="like-btn-count">{{ proj.likes }}</span>
        </button>
        <button class="share-btn" onclick="shareProject()">ğŸ”— ê³µìœ </button>
      </div>
    </div>
  </div>

  <!-- ëŒ“ê¸€ -->
  <div class="comments-section">
    <h2 class="comments-title">ğŸ’¬ ëŒ“ê¸€ {{ comments|length }}ê°œ</h2>

    {% if comments %}
    {% for comment in comments %}
    <div class="comment-item">
      <div class="comment-meta">
        <span class="comment-author">{{ comment.author_name or 'ìµëª…ì½”ë”' }}</span>
        <span class="comment-time">{{ comment.created_at | fmt_date }}</span>
      </div>
      <div class="comment-body">{{ comment.content }}</div>
      {% if session_token and session_token == comment.session_token %}
      <form method="POST" action="/comment/{{ comment.id }}/delete" style="display:inline" onsubmit="return confirm('ì‚­ì œí• ê¹Œìš”?')">
        <input type="hidden" name="redirect_url" value="/showcase/{{ proj.slug }}"/>
        <button type="submit" class="comment-del-btn">ì‚­ì œ</button>
      </form>
      {% endif %}
    </div>
    {% endfor %}
    {% else %}
    <div class="empty-comments">ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”! ğŸ‘‹</div>
    {% endif %}

    <div class="comment-form">
      <h3>ëŒ“ê¸€ ë‹¬ê¸°</h3>
      <form method="POST" action="/comment">
        <input type="hidden" name="project_id" value="{{ proj.id }}"/>
        <input type="hidden" name="redirect_url" value="/showcase/{{ proj.slug }}"/>
        <div class="form-row2">
          <input class="cf-input" type="text" name="author" placeholder="ë‹‰ë„¤ì„ (ì„ íƒ)" maxlength="30"/>
          <input class="cf-input" type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ (ì‚­ì œìš©, ì„ íƒ)"/>
        </div>
        <textarea class="cf-textarea" name="content" placeholder="ì´ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ìƒê°ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!" required></textarea>
        <button type="submit" class="cf-submit">ëŒ“ê¸€ ë“±ë¡</button>
      </form>
    </div>
  </div>
</main>

<footer>Â© 2025 VibeCoder</footer>
</div>

<script>
function likeProject(){
  fetch('/showcase/{{ proj.slug }}/like',{method:'POST'})
    .then(r=>r.json()).then(d=>{
      document.getElementById('like-count').textContent=d.likes;
      document.getElementById('like-btn-count').textContent=d.likes;
      document.getElementById('like-btn').classList.add('liked');
    });
}
function shareProject(){
  navigator.clipboard.writeText(location.href).then(()=>{
    const btn=document.querySelector('.share-btn');
    btn.textContent='âœ… ë³µì‚¬ë¨!';
    setTimeout(()=>btn.textContent='ğŸ”— ê³µìœ ',2000);
  });
}
</script>
</body>
</html>
